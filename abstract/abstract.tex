\documentclass{easychair}
\usepackage{color}
\usepackage{lstcoq}
\usepackage{todonotes}
\usepackage{mathpartir, pftools}

\title{Cumulative inductive types in Coq}

% Authors are joined by \and. Their affiliations are given by \inst, which indexes
% into the list defined using \institute
%
\author{
% Serguei A. Mokhov\inst{1}\thanks{Designed and implemented the class style}
% \and
%     Geoff Sutcliffe\inst{2}\thanks{Did numerous tests and provided a lot of suggestions}
% \and
%    Andrei Voronkov\inst{3}\inst{4}\inst{5}\thanks{Masterminded EasyChair and created versions
%      3.0--3.4 of the class style}
}

% Institutes for affiliations are also joined by \and,
\institute{
%   Concordia University,
%   Montreal, Quebec, Canada\\
%   \email{mokhov@cse.concordia.ca}
% \and
%    University of Miami,
%    Miami, Florida, U.S.A.\\
%    \email{geoff@cs.miami.edu}\\
% \and
%    University of Manchester,
%    Manchester, U.K.\\
%    \email{andrei@voronkov.com}\\
% \and
%    Chalmers University of Technology,
%    Gothenburg, Sweden
% \and
%    EasyChair
 }

%  \authorrunning{} has to be set for the shorter version of the authors' names;
% otherwise a warning will be rendered in the running heads. When processed by
% EasyChair, this command is mandatory: a document without \authorrunning
% will be rejected by EasyChair

\authorrunning{% Mokhov, Sutcliffe and Voronkov
}

% \titlerunning{} has to be set to either the main title or its shorter
% version for the running heads. When processed by
% EasyChair, this command is mandatory: a document without \titlerunning
% will be rejected by EasyChair
\titlerunning{Cumulative inductive types in Coq}

\newcommand{\Type}[1]{{\color{red} \mathtt{Type}}_{#1}}

\begin{document}

\maketitle

In order to avoid well-know paradoxes associated with self-referential
definitions higher-order dependent type theories usually use a
countably infinite hierarchy of universes (also known as sorts),
$\Type{0} : \Type{1} : \cdots$. Such type systems are called
cumulative if for any type $T$ we have that $T : \Type{i}$ implies
$T : \Type{i+1}$. Predicative calculus of inductive constructions
(pCIC), the underlying logic of the Coq proof assistant is one such
system.\todo{cite pCIC paper!?}

Earlier work \cite{DBLP:conf/itp/SozeauT14} on universe polymorphism
in Coq allows constructions to by polymorphic in universe levels.  The
quintessential universe polymorphic construction is the polymorphic definition of
categories:
\Coqe|Record Category$_{\mathtt{i, j}}$ := {Obj : $\Type{\mathtt{i}}$; Hom : Obj -> Obj -> $\Type{\mathtt{j}}$; $\cdots$}|.\footnotemark{}
\footnotetext{Records in Coq are syntactic sugar for an inductive type
with a single constructor.}

However, pCIC does not extend the subtyping relation (induced by
cumulativity) to inductive types. As a result there is no subtyping
relation between instances of a universe polymorphic inductive type.
That is for a category \Coqe|C|, having both
\Coqe|C : Category$_{\mathtt{i, j}}$| and \Coqe|C : Category$_{\mathtt{i', j'}}$|
is only possible if $\mathtt{i = i'}$ and $\mathtt{j = j'}$.
\todo[inline]{should we elaborate a bit that we want subtyping for categories because smallness/largeness!?}

In previous work Timany et al. \cite{DBLP:conf/ictac/Timany015} extend
pCIC to pCuIC (predicative Calculus of Cumulative Inductive
Constructions). This is essentially the system pCIC with a single
subtyping added to it:
\[
\inferH{C-Ind}{
I \equiv (\mathsf{Ind}
(X : \Pi \overset{\rightarrow}{x} : \overset{\rightarrow}{N}.~s)\{
\Pi\overset{\rightarrow}{x_1} : \overset{\rightarrow}{M_1}.
~X~\overset{\rightarrow}{m_1},\dots,\Pi \overset{\rightarrow}{x_n} :
\overset{\rightarrow}{M_n}.~X~\overset{\rightarrow}{m_n}\})\\\
\and
I' \equiv (\mathsf{Ind}
(X : \Pi \overset{\rightarrow}{x} : \overset{\rightarrow}{N'}.~s')\{
\Pi \overset{\rightarrow}{x_1} : \overset{\rightarrow}{M_1'}.~
X~\overset{\rightarrow}{m_1'},\dots,\Pi \overset{\rightarrow}{x_n} :
\overset{\rightarrow}{M_n'}.~X~\overset{\rightarrow}{m_n'}\})\\\
\and
s \preceq s'
\and
\forall i.~ N_i \preceq {N'}_i
\and
\forall i,j.~ (M_i)_j \preceq (M_i')_j\\\
\and
length(\overset{\rightarrow}{m}) = length(\overset{\rightarrow}{x})
\and
\forall i.~X~\overset{\rightarrow}{m_i} \simeq X~ \overset{\rightarrow}{m_i'}
}{
I~\overset{\rightarrow}{m}
\preceq
I'~\overset{\rightarrow}{m}
}
\]


- describe the system (just one additional inference rule)

- explain template polymorphism ``semantics'' (MS)

- example of complete + small => preorder, show how lifting + rule for
cumulativity explain the impossibility of applying this to Types@{i}.

- idea of the consistency proof using Werner \& Lee's model

- for SN, ???

The text

\bibliographystyle{plain}
\bibliography{bib}
\end{document}


%  LocalWords:  cumulativity polymorphism Coq pCIC subtyping Timany
%  LocalWords:  pCuIC
